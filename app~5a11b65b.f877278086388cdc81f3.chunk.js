(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{main:function(t,n,e){"use strict";e.d(n,"configure",function(){return a});var i=e("e2Tw");e("70NS");function a(t){t.use.standardConfiguration().feature("resources/index"),t.use.developmentLogging(i.a.debug?"debug":"warn"),i.a.testing&&t.use.plugin("aurelia-testing"),t.use.plugin("aurelia-mdc-plugin",function(t){return t.addComponents({"mdc-drawer":"MDCDrawer","mdc-switch":"MDCSwitch"})}),t.start().then(function(){return t.setRoot("app")})}},"resources/index":function(t,n,e){"use strict";function i(t){}e.r(n),e.d(n,"configure",function(){return i})},"routes/about/about":function(t,n,e){"use strict";e.r(n),e.d(n,"About",function(){return i});var i=function(){return function(){}}()},"routes/about/about.html":function(t,n,e){t.exports='<template>\n  <require from="./about.styl"></require>\n  <div class="about-body">\n    <p>项目启动日期: 2019-06-08</p>\n    <p>初版竣工日期: 2019-06-24</p>\n    <p>历经难关:\n      <ul>\n        <li>PHP</li>\n        <li>Composer</li>\n        <li>GuzzleHTTP</li>\n        <li>dmm多方法登录</li>\n        <li>cookies转发</li>\n        <li>dmm双站点同时登陆</li>\n        <li>dmm返回结果解析</li>\n        <li>TypeScript</li>\n        <li>Material Components Web</li>\n        <li>舰队collection 2019年 春季活动</li>\n        <li>地球OL</li>\n      </ul>\n    </p>\n    <p>玩的愉快 :)</p>\n  </div>\n</template>\n'},"routes/about/about.styl":function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,".about-body {\n  width: 300px;\n  margin: 12px auto;\n}\n",""])},"routes/auth/auth":function(t,n,e){"use strict";e.r(n),function(t){e.d(n,"Auth",function(){return c});var i=e("RzS9"),a=e("u5ZI"),o=e("4ysu"),s=function(n,e,i,a){return new(i||(i=t))(function(t,o){function s(t){try{c(a.next(t))}catch(t){o(t)}}function r(t){try{c(a.throw(t))}catch(t){o(t)}}function c(n){n.done?t(n.value):new i(function(t){t(n.value)}).then(s,r)}c((a=a.apply(n,e||[])).next())})},r=function(t,n){var e,i,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=n.call(t,s)}catch(t){o=[6,t],i=0}finally{e=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}},c=function(){function t(t,n){this.dmm=t,this.router=n,this.loginID=a.a.loginID||"",this.password=a.a.password||"",this.saveLoginID=!!a.a.loginID,this.savePassword=!!a.a.password,this.autoLogin=a.a.autoLogin,this.category="exchange"===a.a.category?1:0,this.requesting=!1}return t.prototype.login=function(){return s(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return this.requesting=!0,[4,this.dmm.login({login_id:this.loginID,password:this.password,use_auto_login:this.autoLogin?1:0,save_login_id:this.saveLoginID?1:0,save_password:this.savePassword?1:0},1===this.category)];case 1:return t=n.sent(),this.requesting=!1,t.code===i.b.OK&&this.router.navigate("game-list/"),[2]}})})},t.inject=[i.a,o.d],t}()}.call(this,e("B/eG").default)},"routes/auth/auth.html":function(t,n,e){t.exports='<template>\n  <require from="components/tab-bar/tab-bar"></require>\n  <require from="components/checkbox/checkbox"></require>\n  <require from="components/switch/switch"></require>\n  <require from="./auth.styl"></require>\n  <div class="login-category-selection">\n    <tab-bar index.two-way="category">\n      <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0" id="mdc-tab-1">\n        <span class="mdc-tab__content">\n          <span class="mdc-tab__icon material-icons" aria-hidden="true">mood</span>\n          <span class="mdc-tab__text-label">全年龄</span>\n        </span>\n        <span class="mdc-tab-indicator mdc-tab-indicator--active">\n          <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>\n        </span>\n        <span class="mdc-tab__ripple"></span>\n      </button>\n      <button class="mdc-tab" role="tab" aria-selected="false" tabindex="-1" id="mdc-tab-2">\n        <span class="mdc-tab__content">\n          <span class="mdc-tab__icon material-icons" aria-hidden="true">favorite</span>\n          <span class="mdc-tab__text-label">成人向</span>\n        </span>\n        <span class="mdc-tab-indicator">\n          <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>\n        </span>\n        <span class="mdc-tab__ripple"></span>\n      </button>\n    </tab-bar>\n    <div>\n      <form>\n        <div class="login-input-box mdc-elevation--z1">\n          <div class="mdc-text-field mdc-text-field--fullwidth mdc-text-field--no-label">\n            <input type="text" name="login_id" autocomplete="username" class="mdc-text-field__input" placeholder="邮箱" aria-label="Label" value.bind="loginID">\n            <div class="mdc-line-ripple"></div>\n          </div>\n          <div class="mdc-text-field-helper-line">\n            <div class="mdc-text-field-helper-text">DMM邮箱账号</div>\n          </div>\n          <div class="mdc-text-field mdc-text-field--fullwidth mdc-text-field--no-label">\n            <input type="password" name="password" autocomplete="password" class="mdc-text-field__input" placeholder="密码" aria-label="Label" value.bind="password">\n            <div class="mdc-line-ripple"></div>\n          </div>\n          <div class="mdc-text-field-helper-line">\n            <div class="mdc-text-field-helper-text">DMM登录密码</div>\n          </div>\n          <ul class="login-options">\n            <li>\n              <checkbox checked.two-way="saveLoginID">记住账号</checkbox>\n            </li>\n            <li>\n              <checkbox checked.two-way="savePassword">记住密码</checkbox>\n            </li>\n            <li>\n              <checkbox checked.two-way="autoLogin">自动登录</checkbox>\n            </li>\n          </ul>\n        </div>\n        <button class="mdc-button mdc-button--raised login-action-button" type="button" click.delegate="login()">\n          <span class="mdc-button__label">登录</span>\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n'},"routes/auth/auth.styl":function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,".login-category-selection {\n  width: 300px;\n  margin: 48px auto 0 auto;\n}\n.login-category-selection .login-input-box {\n  padding: 20px;\n  margin: 20px 0;\n}\n.login-category-selection .login-input-box input {\n  text-indent: 12px;\n}\n.login-category-selection .login-action-button {\n  height: 56px;\n  font-size: 1rem;\n  width: 100%;\n}\n.login-category-selection .login-options {\n  list-style: none;\n  padding: 0;\n}\n.mdc-form-field>label.input-label-row {\n  padding-left: 0;\n}\n",""])},"routes/game-list/game-list":function(t,n,e){"use strict";e.r(n),function(t){e.d(n,"GameList",function(){return r});var i=e("u5ZI"),a=e("4ysu"),o=function(n,e,i,a){return new(i||(i=t))(function(t,o){function s(t){try{c(a.next(t))}catch(t){o(t)}}function r(t){try{c(a.throw(t))}catch(t){o(t)}}function c(n){n.done?t(n.value):new i(function(t){t(n.value)}).then(s,r)}c((a=a.apply(n,e||[])).next())})},s=function(t,n){var e,i,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=n.call(t,s)}catch(t){o=[6,t],i=0}finally{e=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}},r=function(){function t(t){this.router=t,this.category="exchange"===i.a.category?1:0,this.gameCategory=this.category?"all"===i.a.gameCategory?0:1:0,this.adultList=[],this.allList=[]}return t.prototype.getList=function(t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,fetch(t+".json").catch(function(t){return new Response("[]")})];case 1:return[2,n.sent().json()]}})})},t.prototype.bind=function(){return o(this,void 0,void 0,function(){var t=this;return s(this,function(n){return this.getList("all").then(function(n){for(var e=0;e<n.length;e+=1)t.allList.push(n[e])}),"exchange"===i.a.category&&this.getList("adult").then(function(n){for(var e=0;e<n.length;e+=1)t.adultList.push(n[e])}),[2]})})},t.prototype.run=function(t){return o(this,void 0,void 0,function(){return s(this,function(n){return i.a.game=t,i.a.gameCategory=this.gameCategory?"adult":"all",this.router.navigateToRoute("play",{name:t,category:i.a.gameCategory},{replace:!0}),[2]})})},t.inject=[a.d],t}()}.call(this,e("B/eG").default)},"routes/game-list/game-list.html":function(t,n,e){t.exports='<template>\n  <require from="components/tab-bar/tab-bar"></require>\n  <require from="./game-list.styl"></require>\n  <div>\n    <tab-bar index.two-way="gameCategory" if.bind="category">\n      <button class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0" id="mdc-tab-1">\n        <span class="mdc-tab__content">\n          <span class="mdc-tab__icon material-icons" aria-hidden="true">mood</span>\n          <span class="mdc-tab__text-label">全年龄</span>\n        </span>\n        <span class="mdc-tab-indicator mdc-tab-indicator--active">\n          <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>\n        </span>\n        <span class="mdc-tab__ripple"></span>\n      </button>\n      <button class="mdc-tab" role="tab" aria-selected="false" tabindex="-1" id="mdc-tab-2">\n        <span class="mdc-tab__content">\n          <span class="mdc-tab__icon material-icons" aria-hidden="true">favorite</span>\n          <span class="mdc-tab__text-label">成人向</span>\n        </span>\n        <span class="mdc-tab-indicator">\n          <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>\n        </span>\n        <span class="mdc-tab__ripple"></span>\n      </button>\n    </tab-bar>\n    <div class="game-list-body">\n      <ul>\n        <li repeat.for="info of (gameCategory ? adultList : allList)">\n          <div class="mdc-card">\n            <a href="javascript:void(0);" click.delegate="run(info.name)" class="mdc-card__primary-action game-list-action" tabindex="0">\n              <div class="mdc-card__media mdc-card__media--square game-list-thumb" css="background-image: url(&quot;https://img-freegames.dmm.com/app/${info.thumb}/details/pic_thmb.jpg&quot;);"></div>\n              <div class="game-list-action-content">\n                <h2 class="mdc-typography mdc-typography--headline6">${info.title}</h2>\n                <h3 class="mdc-typography mdc-typography--subtitle2">${info.comment}</h3>\n              </div>\n            </a>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n'},"routes/game-list/game-list.styl":function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,".game-list-body ul {\n  list-style: none;\n  padding: 0;\n  margin: 12px;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, 600px);\n  gap: 12px;\n  justify-content: center;\n}\n.game-list-body ul li {\n  width: 600px;\n}\n.game-list-body .game-list-action {\n  display: flex;\n  flex-direction: row;\n}\n.game-list-body .game-list-action .game-list-action-content {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n}\n.game-list-body .game-list-action .game-list-action-content h2 {\n  margin: 0 12px;\n  line-height: 2rem;\n}\n.game-list-body .game-list-action .game-list-action-content h3 {\n  margin: 0 12px;\n  line-height: 2rem;\n}\n.game-list-body .game-list-thumb {\n  width: 164px;\n  height: 90px;\n}\n",""])},"routes/play/play":function(t,n,e){"use strict";e.r(n),function(t){e.d(n,"Play",function(){return c});var i=e("RzS9"),a=e("4ysu"),o=e("u5ZI"),s=function(n,e,i,a){return new(i||(i=t))(function(t,o){function s(t){try{c(a.next(t))}catch(t){o(t)}}function r(t){try{c(a.throw(t))}catch(t){o(t)}}function c(n){n.done?t(n.value):new i(function(t){t(n.value)}).then(s,r)}c((a=a.apply(n,e||[])).next())})},r=function(t,n){var e,i,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=n.call(t,s)}catch(t){o=[6,t],i=0}finally{e=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}},c=function(){function t(t,n){var e=this;this.dmm=t,this.router=n,this.osapi="",this.iframeWidth=1200,this.iframeHeight=1200,this.category="",this.name="",this.notification=!0,this.myapp=!0,this.loading=!1,this.confirm=!1,this.handleMessage=function(t){if(t.origin!==window.location.origin){var n=JSON.parse(t.data);if("s"in n)switch(n.s){case"resize_iframe":"a"in n&&(e.iframeHeight=n.a[0]);break;case"__ack":e.loading=!1}}}}return t.prototype.handleOsapi=function(t){var n=new URL(t);return n.searchParams.has("parent")&&n.searchParams.set("parent",""+window.location.origin+window.location.pathname),n.toString()},t.prototype.handleResponse=function(t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(t.code){case i.b.OK:if(this.osapi=this.handleOsapi(t.data.osapi),o.a.autoRedirect)return window.location.href=this.osapi,[2];this.loading=!0,"iframe_width"in t.data&&t.data.iframe_width&&(this.iframeWidth=t.data.iframe_width),o.a.game=this.name;break;case i.b.DMM_GAME_INSTALL_NEEDED:this.confirm=!0;break;case i.b.DMM_FORCE_REDIRECT:case i.b.DMM_GAME_ALREADY_INSTALLED:this.run();break;case i.b.DMM_TOKEN_EXPIRED:o.a.authenticated=!1,this.router.navigate("auth/");break;default:this.router.navigate("game-list/")}return[2]})})},t.prototype.install=function(){return s(this,void 0,void 0,function(){var t,n;return r(this,function(e){switch(e.label){case 0:return t={app_name:this.name,app_base:this.category,notification:this.notification?1:0,myapp:this.myapp?1:0},[4,this.dmm.install(t)];case 1:switch((n=e.sent()).code){case i.b.OK:this.confirm=!1}return this.handleResponse(n),[2]}})})},t.prototype.run=function(){return s(this,void 0,void 0,function(){var t,n;return r(this,function(e){switch(e.label){case 0:return t={app_name:this.name,app_base:this.category},[4,this.dmm.run(t)];case 1:return n=e.sent(),this.handleResponse(n),[2]}})})},t.prototype.attached=function(){return s(this,void 0,void 0,function(){var t;return r(this,function(n){if((t=this.router.currentInstruction.queryParams).category&&t.name)this.name=t.name,this.category=t.category;else{if(!o.a.gameCategory||!o.a.game)return[2,this.router.navigate("game-list/")];this.category=o.a.gameCategory,this.name=o.a.game,this.router.navigateToRoute("play",{category:this.category,name:this.name},{replace:!0})}return"all"!==this.category&&"adult"!==this.category||this.name.length>64||"all"!==this.category&&"all"===o.a.category?[2,this.router.navigate("game-list/")]:(this.run(),[2])})})},t.prototype.bind=function(){window.addEventListener("message",this.handleMessage)},t.prototype.unbind=function(){window.removeEventListener("message",this.handleMessage)},t.inject=[i.a,a.d],t}()}.call(this,e("B/eG").default)},"routes/play/play.html":function(t,n,e){t.exports='<template>\n  <require from="components/checkbox/checkbox"></require>\n  <require from="./play.styl"></require>\n  <div class="game-container" class.bind="loading ? \'loading\' : \'\'">\n    <iframe class="game-frame" if.bind="osapi" src.bind="osapi" width.bind="iframeWidth" height.bind="iframeHeight" scrolling="no" allowfullscreen=\'true\'></iframe>\n  </div>\n  <div class="mdc-dialog"\n     class.bind="confirm ? \'mdc-dialog--open\' : \'\'"\n     role="alertdialog"\n     aria-modal="true"\n     aria-labelledby="my-dialog-title"\n     aria-describedby="my-dialog-content">\n    <div class="mdc-dialog__container">\n      <div class="mdc-dialog__surface">\n        \x3c!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() --\x3e\n        <h2 class="mdc-dialog__title" id="my-dialog-title">\n          安装游戏到账户\n        </h2>\n        <div class="mdc-dialog__content" id="my-dialog-content">\n          <ul class="mdc-list install-options">\n            <li class="mdc-list-item" tabindex="0">\n              <checkbox checked.two-way="notification">接收消息提醒</checkbox>\n            </li>\n            <li class="mdc-list-item" tabindex="0">\n              <checkbox checked.two-way="myapp">在个人资料里显示这个应用</checkbox>\n            </li>\n          </ul>\n        </div>\n        <footer class="mdc-dialog__actions">\n          <a href="game-list" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">\n            <span class="mdc-button__label">返回</span>\n          </a>\n          <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="accept" click.delegate="install()">\n            <span class="mdc-button__label">确定</span>\n          </button>\n        </footer>\n      </div>\n    </div>\n    <div class="mdc-dialog__scrim"></div>\n  </div>\n</template>\n'},"routes/play/play.styl":function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,".game-container {\n  transition: filter 0.3s;\n  background: #fff;\n}\n.game-frame {\n  display: block;\n  border: 0;\n  margin: 0 auto;\n}\n.loading {\n  filter: brightness(0.5);\n}\nul.install-options >li {\n  padding: 0;\n}\n",""])},"routes/settings/settings":function(t,n,e){"use strict";e.r(n),e.d(n,"Settings",function(){return a});var i=e("u5ZI"),a=function(){function t(){this.autoRedirect=!!i.a.autoRedirect}return t.prototype.autoRedirectChanged=function(t){i.a.autoRedirect=t},t}()},"routes/settings/settings.html":function(t,n,e){t.exports='<template>\n  <require from="./settings.styl"></require>\n  <require from="components/switch/switch"></require>\n  <div class="settings-body">\n    <switch checked.bind="autoRedirect">自动跳转到OSAPI框架页(推荐游戏专用浏览器用户启用)</switch>\n  </div>\n</template>\n'},"routes/settings/settings.styl":function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,".settings-body {\n  width: 300px;\n  margin: 12px auto;\n}\n",""])}}]);